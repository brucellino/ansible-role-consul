---
# tasks file for ansible-role-consul
- name: ğŸ“¦â“
  ansible.builtin.stat:
    path: /.dockerenv
    get_checksum: false
    get_mime: false
    get_attributes: false
  register: contained

- include_tasks: prerequisites.yml
- include_tasks: user.yml
  when: add_default_user | bool
- include_tasks: system.yml
  when: not contained.stat.exists
- include_tasks: vault-agent.yml
- include_tasks: launch-contained.yml
  when: contained.stat.exists
- include_tasks: launch-systemd.yml
  when: not contained.stat.exists
