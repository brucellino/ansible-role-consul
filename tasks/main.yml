---
# tasks file for ansible-role-template
- name: ğŸ“¦â“
  ansible.builtin.stat:
    path: /.dockerenv
    get_checksum: false
    get_mime: false
    get_attributes: false
  register: contained

- name: Prerequisites
  ansible.builtin.include_tasks: prerequisites.yml
- name: User
  ansible.builtin.include_tasks: user.yml
  when: add_default_user | bool
- name: System
  ansible.builtin.include_tasks: system.yml
  when: not contained.stat.exists
- name: Vault Agent
  ansible.builtin.include_tasks: vault-agent.yml
- name: Launch in Container
  ansible.builtin.include_tasks: launch-contained.yml
  when: contained.stat.exists
- name: Launch with Systemd
  ansible.builtin.include_tasks: launch-systemd.yml
  when: not contained.stat.exists
